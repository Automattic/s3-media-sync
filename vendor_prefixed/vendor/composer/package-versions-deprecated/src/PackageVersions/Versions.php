<?php

declare(strict_types=1);

namespace PackageVersions;

use Composer\InstalledVersions;
use OutOfBoundsException;

class_exists(InstalledVersions::class);

/**
 * This class is generated by composer/package-versions-deprecated, specifically by
 * @see \PackageVersions\Installer
 *
 * This file is overwritten at every run of `composer install` or `composer update`.
 *
 * @deprecated in favor of the Composer\InstalledVersions class provided by Composer 2. Require composer-runtime-api:^2 to ensure it is present.
 */
final class Versions
{
    /**
     * @deprecated please use {@see self::rootPackageName()} instead.
     *             This constant will be removed in version 2.0.0.
     */
    const ROOT_PACKAGE_NAME = 'wpcomvip/s3-media-sync';

    /**
     * Array of all available composer packages.
     * Dont read this array from your calling code, but use the \PackageVersions\Versions::getVersion() method instead.
     *
     * @var array<string, string>
     * @internal
     */
    const VERSIONS          = array (
  'aws/aws-sdk-php' => '3.150.3@4c4e1cef09a6b510eae7a871ec394d124b5005fe',
  'composer/installers' => 'v1.9.0@b93bcf0fa1fccb0b7d176b0967d969691cd74cca',
  'guzzlehttp/guzzle' => '7.0.1@2d9d3c186a6637a43193e66b097c50e4451eaab2',
  'guzzlehttp/promises' => 'v1.3.1@a59da6cf61d80060647ff4d3eb2c03a2bc694646',
  'guzzlehttp/psr7' => '1.6.1@239400de7a173fe9901b9ac7c06497751f00727a',
  'mtdowling/jmespath.php' => '2.6.0@42dae2cbd13154083ca6d70099692fef8ca84bfb',
  'psr/http-client' => '1.0.1@2dfb5f6c5eff0e91e20e913f8c5452ed95b86621',
  'psr/http-message' => '1.0.1@f6561bf28d520154e4b0ec72be95418abe6d9363',
  'ralouphie/getallheaders' => '3.0.3@120b605dfeb996808c31b6477290a714d356e822',
  'symfony/polyfill-mbstring' => 'v1.18.1@a6977d63bf9a0ad4c65cd352709e230876f9904a',
  'composer/package-versions-deprecated' => 'dev-master@f921205948ab93bb19f86327c793a81edb62f236',
  'humbug/php-scoper' => '0.14.0@6ff13aaae731395d04c06fbdfa9ef08bbb879555',
  'jetbrains/phpstorm-stubs' => 'dev-master@b8cf707c050f775cdb7693afa6099bd227b383f4',
  'nikic/php-parser' => 'v4.10.4@c6d052fc58cb876152f89f532b95a8d7907e7f0e',
  'psr/container' => 'dev-master@381524e8568e07f31d504a945b88556548c8c42e',
  'symfony/console' => '4.4.x-dev@3650057f1c18dea3cfffdcf2f7c5e39215dcd7b8',
  'symfony/filesystem' => '4.4.x-dev@715e7a531bdae109a828f9e91629e5b3b2926beb',
  'symfony/finder' => '4.4.x-dev@2543795ab1570df588b9bbd31e1a2bd7037b94f6',
  'symfony/polyfill-ctype' => 'dev-main@c6c942b1ac76c82448322025e084cadc56048b4e',
  'symfony/polyfill-php73' => 'dev-main@a678b42e92f86eca04b7fa4c0f6f19d097fb69e2',
  'symfony/polyfill-php80' => 'dev-main@dc3063ba22c2a1fd2f45ed856374d79114998f91',
  'symfony/service-contracts' => 'dev-main@bf99754c6182a126968b1c2709d18548489f27eb',
  'wpcomvip/s3-media-sync' => 'dev-feature/php-scoper@714395c923a1ac88aab17ee919fc71756e152fba',
);

    private function __construct()
    {
    }

    /**
     * @psalm-pure
     *
     * @psalm-suppress ImpureMethodCall we know that {@see InstalledVersions} interaction does not
     *                                  cause any side effects here.
     */
    public static function rootPackageName() : string
    {
        if (!class_exists(InstalledVersions::class, false) || !InstalledVersions::getRawData()) {
            return self::ROOT_PACKAGE_NAME;
        }

        return InstalledVersions::getRootPackage()['name'];
    }

    /**
     * @throws OutOfBoundsException If a version cannot be located.
     *
     * @psalm-param key-of<self::VERSIONS> $packageName
     * @psalm-pure
     *
     * @psalm-suppress ImpureMethodCall we know that {@see InstalledVersions} interaction does not
     *                                  cause any side effects here.
     */
    public static function getVersion(string $packageName): string
    {
        if (class_exists(InstalledVersions::class, false) && InstalledVersions::getRawData()) {
            return InstalledVersions::getPrettyVersion($packageName)
                . '@' . InstalledVersions::getReference($packageName);
        }

        if (isset(self::VERSIONS[$packageName])) {
            return self::VERSIONS[$packageName];
        }

        throw new OutOfBoundsException(
            'Required package "' . $packageName . '" is not installed: check your ./vendor/composer/installed.json and/or ./composer.lock files'
        );
    }
}
